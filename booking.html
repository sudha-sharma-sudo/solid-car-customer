<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Car - Solid Car</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-car"></i> Solid Car
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cars.html">Cars</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="logout()">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container mt-5">
        <div class="row">
            <!-- Car Details -->
            <div class="col-md-4">
                <div class="card mb-4">
                    <img src="images/car-hero.svg" class="card-img-top" alt="Selected Car" id="carImage">
                    <div class="card-body">
                        <h5 class="card-title" id="carName">Loading car details...</h5>
                        <div id="carDetails">
                            <ul class="list-unstyled">
                                <li><i class="fas fa-cog"></i> <span id="transmission">Automatic</span></li>
                                <li><i class="fas fa-user"></i> <span id="seats">5 Seats</span></li>
                                <li><i class="fas fa-gas-pump"></i> <span id="fuelType">Petrol</span></li>
                                <li><i class="fas fa-tag"></i> <span id="pricePerDay">$50/day</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Booking Form -->
            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title mb-4">Book Your Car</h3>
                        <form id="bookingForm" onsubmit="return handleBooking(event)">
                            <!-- Pickup Location -->
                            <div class="mb-3">
                                <label for="pickupLocation" class="form-label">Pickup Location</label>
                                <select class="form-select" id="pickupLocation" required>
                                    <option value="">Select pickup location</option>
                                    <option value="airport">Airport Terminal</option>
                                    <option value="downtown">Downtown Office</option>
                                    <option value="mall">Shopping Mall</option>
                                </select>
                            </div>

                            <!-- Dates -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="pickupDate" class="form-label">Pickup Date & Time</label>
                                    <input type="text" class="form-control" id="pickupDate" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="returnDate" class="form-label">Return Date & Time</label>
                                    <input type="text" class="form-control" id="returnDate" required>
                                </div>
                            </div>

                            <!-- Additional Services -->
                            <div class="mb-3">
                                <label class="form-label">Additional Services</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="insurance">
                                    <label class="form-check-label" for="insurance">
                                        Insurance Coverage (+$10/day)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gps">
                                    <label class="form-check-label" for="gps">
                                        GPS Navigation (+$5/day)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="childSeat">
                                    <label class="form-check-label" for="childSeat">
                                        Child Seat (+$5/day)
                                    </label>
                                </div>
                            </div>

                            <!-- Price Breakdown -->
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">Price Breakdown</h5>
                                    <table class="table table-sm">
                                        <tbody>
                                            <tr>
                                                <td>Base Rate</td>
                                                <td class="text-end" id="baseRate">$0.00</td>
                                            </tr>
                                            <tr>
                                                <td>Additional Services</td>
                                                <td class="text-end" id="additionalServices">$0.00</td>
                                            </tr>
                                            <tr>
                                                <td>Taxes & Fees</td>
                                                <td class="text-end" id="taxes">$0.00</td>
                                            </tr>
                                            <tr class="fw-bold">
                                                <td>Total</td>
                                                <td class="text-end" id="totalPrice">$0.00</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Payment Method -->
                            <div class="mb-3">
                                <label class="form-label">Payment Method</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="paymentMethod" id="creditCard" checked>
                                    <label class="form-check-label" for="creditCard">
                                        Credit Card
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="paymentMethod" id="paypal">
                                    <label class="form-check-label" for="paypal">
                                        PayPal
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100">Confirm Booking</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://kit.fontawesome.com/your-kit-code.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize date pickers
        flatpickr("#pickupDate", {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            minDate: "today"
        });
        
        flatpickr("#returnDate", {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            minDate: "today"
        });

        // Load car details from URL parameters
        function loadCarDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const carId = urlParams.get('car');
            
            // In a real app, this would fetch car details from an API
            const carDetails = {
                camry: {
                    name: "Toyota Camry",
                    price: 50,
                    transmission: "Automatic",
                    seats: "5 Seats",
                    fuelType: "Petrol"
                },
                crv: {
                    name: "Honda CR-V",
                    price: 65,
                    transmission: "Automatic",
                    seats: "7 Seats",
                    fuelType: "Petrol"
                },
                bmw3: {
                    name: "BMW 3 Series",
                    price: 100,
                    transmission: "Automatic",
                    seats: "5 Seats",
                    fuelType: "Petrol"
                }
            };

            const car = carDetails[carId] || carDetails.camry;
            
            document.getElementById('carName').textContent = car.name;
            document.getElementById('transmission').textContent = car.transmission;
            document.getElementById('seats').textContent = car.seats;
            document.getElementById('fuelType').textContent = car.fuelType;
            document.getElementById('pricePerDay').textContent = `$${car.price}/day`;
        }

        // Calculate total price
        function calculatePrice() {
            const baseRate = 50; // This would come from the car details in a real app
            const days = 1; // Calculate days between pickup and return dates
            const additionalServices = 0; // Calculate based on selected services
            const taxRate = 0.1; // 10% tax

            const subtotal = (baseRate * days) + additionalServices;
            const taxes = subtotal * taxRate;
            const total = subtotal + taxes;

            document.getElementById('baseRate').textContent = `$${baseRate.toFixed(2)}`;
            document.getElementById('additionalServices').textContent = `$${additionalServices.toFixed(2)}`;
            document.getElementById('taxes').textContent = `$${taxes.toFixed(2)}`;
            document.getElementById('totalPrice').textContent = `$${total.toFixed(2)}`;
        }

        // Handle form submission
        function handleBooking(event) {
            event.preventDefault();
            
            // In a real app, this would submit the booking to an API
            alert('Booking submitted successfully!');
            window.location.href = 'dashboard.html';
            
            return false;
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadCarDetails();
            calculatePrice();
        });
    </script>
</body>
</html>
